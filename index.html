<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Receita BGS - 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { background: #f1f5f9; color: #1e293b; font-family: 'Inter', sans-serif; height: 100vh; overflow: hidden; }
        .dashboard-container { height: 100vh; display: flex; flex-direction: column; padding: 0.8rem; gap: 0.7rem; }
        .nav-btn { padding: 4px 12px; border-radius: 6px; font-size: 11px; font-weight: 700; background: #e2e8f0; color: #64748b; transition: 0.2s; }
        .nav-btn.active { background: #0f172a; color: white; }
        .kpi-card { background: white; border-radius: 12px; padding: 0.8rem; border: 1px solid #cbd5e1; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .share-box { background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 0.4rem; text-align: center; flex: 1; min-width: 0; }
        .pos { color: #10b981; } .neg { color: #ef4444; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        table td, table th { padding: 6px 10px !important; line-height: 1.1; }
        
        .table-container { min-height: 285px; display: flex; flex-direction: column; justify-content: space-between; }
        .row-total { background: #0f172a; color: white; font-weight: 800; text-transform: uppercase; font-size: 10px; }
    </style>
</head>
<body>

    <div class="dashboard-container">
        <div class="flex justify-between items-center border-b pb-2">
            <div class="flex items-center gap-4">
                <h1 class="text-xl font-black text-slate-900 italic uppercase">Receita BGS - 2026</h1>
                <nav class="flex gap-1" id="menu-meses"></nav>
            </div>
            <div id="tag-mes" class="bg-slate-900 text-white px-3 py-1 rounded text-[10px] font-bold uppercase tracking-widest italic">JANEIRO</div>
        </div>

        <div id="conteudo-dinamico" class="flex-1 flex flex-col min-h-0">
            <div id="painel-dados" class="flex flex-col gap-3 flex-1 min-h-0">
                <div class="grid grid-cols-4 gap-4">
                    <div class="kpi-card border-l-4 border-l-slate-400">
                        <p class="text-[9px] font-extrabold text-slate-500 uppercase">REALIZADO MÊS</p>
                        <p class="text-3xl font-black text-slate-700" id="kpi-real">0</p>
                    </div>
                    <div class="kpi-card border-l-4 border-l-slate-400">
                        <p class="text-[9px] font-extrabold text-slate-500 uppercase">FORECAST MÊS</p>
                        <p class="text-3xl font-black text-slate-700" id="kpi-fcst">0</p>
                    </div>
                    <div class="kpi-card border-l-4 border-l-emerald-500">
                        <p class="text-[9px] font-extrabold text-slate-500 uppercase">VARIAÇÃO R$</p>
                        <p class="text-3xl font-black pos" id="kpi-var-r">0</p>
                    </div>
                    <div class="kpi-card border-l-4 border-l-emerald-500">
                        <p class="text-[9px] font-extrabold text-slate-500 uppercase">VARIAÇÃO %</p>
                        <p class="text-3xl font-black pos" id="kpi-var-p">0%</p>
                    </div>
                </div>

                <div>
                    <p class="text-[9px] font-black text-slate-400 uppercase italic mb-1.5">Share por LOB (%) - Realizado</p>
                    <div class="flex gap-2 w-full" id="container-share"></div>
                </div>

                <div class="grid grid-cols-2 gap-4 flex-1 min-h-0">
                    <div class="bg-white rounded-xl border border-slate-200 flex flex-col overflow-hidden table-container">
                        <div class="bg-slate-800 text-white text-[10px] font-bold px-3 py-1.5 uppercase tracking-wider italic text-center">Performance por LOB</div>
                        <div class="flex-1 overflow-y-auto no-scrollbar">
                            <table class="w-full text-[11px]">
                                <thead class="bg-slate-50 sticky top-0 text-[9px] text-slate-500 border-b">
                                    <tr>
                                        <th class="text-left uppercase">LOB</th>
                                        <th class="text-right uppercase">Real</th>
                                        <th class="text-right uppercase">Fcst</th>
                                        <th class="text-right uppercase">Var R$</th>
                                        <th class="text-right uppercase">Var %</th>
                                    </tr>
                                </thead>
                                <tbody id="corpo-lob"></tbody>
                            </table>
                        </div>
                        <table class="w-full text-[11px]">
                            <tfoot id="total-lob"></tfoot>
                        </table>
                    </div>

                    <div class="bg-white rounded-xl border border-slate-200 flex flex-col overflow-hidden table-container">
                        <div class="bg-slate-800 text-white text-[10px] font-bold px-3 py-1.5 uppercase tracking-wider italic text-center">Performance por Gestor</div>
                        <div class="flex-1 overflow-y-auto no-scrollbar">
                            <table class="w-full text-[11px]">
                                <thead class="bg-slate-50 sticky top-0 text-[9px] text-slate-500 border-b">
                                    <tr>
                                        <th class="text-left uppercase">Gestor</th>
                                        <th class="text-right uppercase">Real</th>
                                        <th class="text-right uppercase">Fcst</th>
                                        <th class="text-right uppercase">Var R$</th>
                                        <th class="text-right uppercase">Var %</th>
                                    </tr>
                                </thead>
                                <tbody id="corpo-gestor"></tbody>
                            </table>
                        </div>
                        <table class="w-full text-[11px]">
                            <tfoot id="total-gestor"></tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <div id="alerta-processamento" class="hidden flex-1 flex flex-col items-center justify-center bg-white rounded-xl border-2 border-dashed border-slate-200 m-4">
                <div class="bg-amber-100 p-6 rounded-full mb-4">
                    <svg class="w-16 h-16 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                </div>
                <h2 class="text-2xl font-black text-slate-800 mb-2 uppercase">Dados em Processamento</h2>
                <p class="text-slate-500 italic text-sm">Os dados de <span id="mes-alerta" class="font-bold"></span> ainda não estão disponíveis.</p>
            </div>
        </div>
    </div>

    <script>
        const dadosAno = {
            "JANEIRO": {
                disponivel: true,
                tabelaLOB: [
                    { nome: "5020 - Bancos", real: 3779396, fcst: 4688774 },
                    { nome: "5021 - D&J Metais", real: 2617256, fcst: 2181798 },
                    { nome: "5022 - Mineração", real: 17020522, fcst: 14353762 },
                    { nome: "5023 - Eletrônicos", real: 2809100, fcst: 2352613 },
                    { nome: "5024 - Cartões", real: 329344, fcst: 405122 },
                    { nome: "5025 - Farma", real: 1857479, fcst: 2041786 },
                    { nome: "5029 - Agro", real: 34775, fcst: 37191 },
                    { nome: "5200 - Armazen.", real: 122918, fcst: 129902 },
                    { nome: "6000 - Joias", real: 1266971, fcst: 1508320 },
                    { nome: "6220 - Luxury", real: 1459776, fcst: 1556826 }
                ],
                tabelaGestor: [
                    { nome: "RICARDO", real: 16278436, fcst: 14140243 },
                    { nome: "PAULA", real: 5229564, fcst: 4646409 },
                    { nome: "F. PELLEGRINI", real: 2681201, fcst: 3414975 },
                    { nome: "MARINA", real: 2551343, fcst: 2803179 },
                    { nome: "JULIANA", real: 2002163, fcst: 1447773 },
                    { nome: "FERNANDA", real: 1857479, fcst: 2041786 },
                    { nome: "MARIELLA", real: 543245, fcst: 517396 },
                    { nome: "FILIPE COELHO", real: 87705, fcst: 240326 },
                    { nome: "AFFILIATES", real: 66401, fcst: 4006 }
                ]
            }
        };

        const mesesMenu = ["JANEIRO", "FEVEREIRO", "MARÇO", "ABRIL", "MAIO", "JUNHO", "JULHO", "AGOSTO", "SETEMBRO", "OUTUBRO", "NOVEMBRO", "DEZEMBRO"];
        const fmt = (v) => v.toLocaleString('pt-BR');

        function carregar(mesNome) {
            const m = dadosAno[mesNome];
            const painel = document.getElementById('painel-dados');
            const alerta = document.getElementById('alerta-processamento');
            
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            if(document.getElementById('btn-'+mesNome)) document.getElementById('btn-'+mesNome).classList.add('active');
            document.getElementById('tag-mes').innerText = mesNome;

            if (!m || !m.disponivel) {
                painel.classList.add('hidden');
                alerta.classList.remove('hidden');
                document.getElementById('mes-alerta').innerText = mesNome;
                return;
            }

            painel.classList.remove('hidden');
            alerta.classList.add('hidden');

            let tReal = 0, tFcst = 0;
            m.tabelaLOB.forEach(i => { tReal += i.real; tFcst += i.fcst; });

            const criarLinhaTotal = (real, fcst, label) => {
                const vr = real - fcst;
                const vp = fcst !== 0 ? (vr / fcst) * 100 : 0;
                return `<tr class="row-total italic">
                    <td class="w-[25%]">${label}</td>
                    <td class="text-right w-[18%]">${fmt(real)}</td>
                    <td class="text-right w-[18%]">${fmt(fcst)}</td>
                    <td class="text-right w-[18%]">${vr>=0?'+':''}${fmt(vr)}</td>
                    <td class="text-right w-[15%]">${vp>=0?'+':''}${vp.toFixed(0)}%</td>
                </tr>`;
            };

            document.getElementById('corpo-lob').innerHTML = m.tabelaLOB.map(i => {
                const vr = i.real - i.fcst;
                const vp = i.fcst !== 0 ? (vr / i.fcst) * 100 : 0;
                return `<tr class="border-t"><td class="w-[25%]"><b>${i.nome}</b></td><td class="text-right w-[18%]">${fmt(i.real)}</td><td class="text-right w-[18%]">${fmt(i.fcst)}</td><td class="text-right w-[18%] ${vr>=0?'pos':'neg'}">${vr>=0?'+':''}${fmt(vr)}</td><td class="text-right w-[15%] ${vp>=0?'pos':'neg'}">${vp>=0?'+':''}${vp.toFixed(0)}%</td></tr>`;
            }).join('');
            document.getElementById('total-lob').innerHTML = criarLinhaTotal(tReal, tFcst, "TOTAL LOB");

            document.getElementById('corpo-gestor').innerHTML = m.tabelaGestor.map(i => {
                const vr = i.real - i.fcst;
                const vp = i.fcst !== 0 ? (vr / i.fcst) * 100 : 0;
                return `<tr class="border-t"><td class="w-[25%]"><b>${i.nome}</b></td><td class="text-right w-[18%]">${fmt(i.real)}</td><td class="text-right w-[18%]">${fmt(i.fcst)}</td><td class="text-right w-[18%] ${vr>=0?'pos':'neg'}">${vr>=0?'+':''}${fmt(vr)}</td><td class="text-right w-[15%] ${vp>=0?'pos':'neg'}">${vp>=0?'+':''}${vp.toFixed(0)}%</td></tr>`;
            }).join('');
            document.getElementById('total-gestor').innerHTML = criarLinhaTotal(tReal, tFcst, "TOTAL GERAL");

            const rankedShare = [...m.tabelaLOB]
                .sort((a, b) => b.real - a.real)
                .map(i => {
                    const perc = ((i.real / tReal) * 100).toFixed(0);
                    const label = i.nome.includes('-') ? i.nome.split('-')[1].trim() : i.nome;
                    return `<div class="share-box"><p class="text-[13px] font-black text-slate-700">${perc}%</p><p class="text-[8px] font-bold text-slate-400 uppercase truncate">${label}</p></div>`;
                }).join('');

            document.getElementById('kpi-real').innerText = fmt(tReal);
            document.getElementById('kpi-fcst').innerText = fmt(tFcst);
            document.getElementById('kpi-var-r').innerText = (tReal-tFcst>=0?'+ ':'') + fmt(tReal-tFcst);
            document.getElementById('kpi-var-p').innerText = (tReal-tFcst>=0?'+ ':'') + ((tReal-tFcst)/tFcst*100).toFixed(0) + '%';
            document.getElementById('container-share').innerHTML = rankedShare;
        }

        const nav = document.getElementById('menu-meses');
        mesesMenu.forEach(m => {
            const b = document.createElement('button');
            b.id = 'btn-'+m; b.innerText = m.substring(0,3);
            b.className = 'nav-btn'; b.onclick = () => carregar(m);
            nav.appendChild(b);
        });
        carregar("JANEIRO");
    </script>
</body>
</html>
